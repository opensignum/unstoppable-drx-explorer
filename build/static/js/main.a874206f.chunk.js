(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,n){e.exports=n.p+"static/media/logo.686eb887.svg"},185:function(e,t,n){e.exports=n.p+"static/media/graphic.c7645dec.svg"},208:function(e,t,n){e.exports=n(399)},236:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),c=n.n(o),i=n(37),u=n(38),s=n.n(u),l=n(50),p=n(51),d=n(54),m=n(53),f=(n(234),n(235),n(236),n(63)),E=n(39),h=n(406),v=n(408),C=n(407),O=n(184),g=n.n(O),S=n(185),I=n.n(S),R=n(52),_=n.n(R),b=_()("@home",["SEARCH_ISRC","SEARCH_ISRC_SUCCESS","SEARCH_ISRC_ERROR"]),N=function(e){return{type:b.SEARCH_ISRC,payload:e}},A=n(21),y={recordings:[]},w=Object(A.c)({recordings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.recordings,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===b.SEARCH_ISRC_SUCCESS?r:e}}),j=n(20),k=n.n(j),T=n(23),x=k.a.mark(L),P=k.a.mark(U);function L(e){var t,n,r,a;return k.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,n=t.isrc,o.next=5,Object(T.b)(s.a.get,"/recordings/search?isrc=".concat(n));case 5:return r=o.sent,a=r.data,console.log(a),o.next=10,Object(T.c)({type:b.SEARCH_ISRC_SUCCESS,payload:a});case 10:o.next=16;break;case 12:return o.prev=12,o.t0=o.catch(1),o.next=16,Object(T.c)({type:b.SEARCH_ISRC_ERROR,payload:o.t0});case 16:case"end":return o.stop()}},x,null,[[1,12]])}function U(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)(b.SEARCH_ISRC,L);case 2:case"end":return e.stop()}},P)}var D=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.SearchISRC,n=e.recordings;return a.a.createElement("div",null,a.a.createElement("div",{className:"white-box"}),a.a.createElement(h.a,null,a.a.createElement("div",{className:"circles-box"},a.a.createElement("img",{src:I.a,style:{width:"100%"},alt:"circles"})),a.a.createElement("div",{className:"page"},a.a.createElement(v.a,{secondary:!0},a.a.createElement(v.a.Item,null,a.a.createElement("img",{src:g.a,style:{width:"120px"},alt:"logo"})),a.a.createElement(v.a.Menu,{position:"right"},a.a.createElement(v.a.Item,{name:"gateway",active:!0,onClick:function(){}}))),a.a.createElement("div",{id:"search-box"},a.a.createElement(C.a,{input:{fluid:!0},fluid:!0,placeholder:"Enter ISRC",onSearchChange:function(e,n){return t({isrc:n.value})},results:n.map(function(e){return{title:"".concat(e.creditedArtist," - ").concat(e.title),description:e.additionalArtists.map(function(e){return e.artist.name}).join(", ")}})})))))}}]),n}(a.a.Component),B=Object(i.b)(function(e){return{recordings:e.home.recordings}},function(e){return{SearchISRC:function(t){return e(N(t))}}})(Object(E.f)(D)),H=n(117),V=_()("@app",["APP_ERROR","CLEAR"]),G=function(){return{type:V.CLEAR}},M=n(197),J=[],F=Object(A.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===V.APP_ERROR?[].concat(Object(M.a)(e),[r]):n===V.CLEAR?[]:e}});var z={post:function(e){return e.includes("/api/errors/")?new Promise(function(e){return setTimeout(e,100,{data:{},status:200})}):new Promise(function(e,t){return setTimeout(t,500,{data:{message:"An error occurred"},status:500})})}},W=k.a.mark($),X=k.a.mark(q);function $(e){var t;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(T.b)(z.post,"/api/errors/",t);case 4:n.next=10;break;case 6:return n.prev=6,n.t0=n.catch(1),void(n.next=10);case 10:case"end":return n.stop()}},W,null,[[1,6]])}function q(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)(V.APP_ERROR,$);case 2:case"end":return e.stop()}},X)}var K=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.errors,n=e.Clear;t.length>0&&(t.forEach(function(e){H.NotificationManager.error(e,"Error",3e3)}),n())}},{key:"render",value:function(){return a.a.createElement(H.NotificationContainer,null)}}]),n}(r.Component),Q=(Object(i.b)(function(e){return{errors:e.error.errors}},function(e){return{Clear:function(){return e(G())}}})(K),n(4)),Y=n.n(Q),Z=function(e){var t=e.className,n=e.background,r=e.children;return a.a.createElement("div",{className:Y()("page",t,"has-background-".concat(n))},r)};Z.defaultProps={background:"white"};var ee=Z,te=function(e){var t=e.className,n=e.isCentered,r=e.children;return a.a.createElement("div",{className:Y()("page-content",t,{"is-centered":n})},r)};te.defaultProps={isCentered:!1};var ne=te,re=function(e){var t=e.children;return a.a.createElement("footer",{className:Y()("page-footer")},a.a.createElement("div",{className:"content has-text-centered"},t))};re.defaultProps={};var ae=re;ee.Content=ne,ee.Footer=ae;var oe=ee,ce=function(e){e.code,e.title,e.message,e.history,e.hasBackButton;return a.a.createElement(oe,null,a.a.createElement(oe.Content,null))};ce.defaultProps={history:{},hasBackButton:!1};var ie=ce,ue=function(e){var t=e.children;return a.a.createElement(f.a,null,a.a.createElement(a.a.Fragment,null,t,a.a.createElement(E.c,null,a.a.createElement(E.a,{exact:!0,path:"/",component:B}),a.a.createElement(E.a,{path:"*",component:function(e){return a.a.createElement(ie,Object.assign({code:404,title:"Page not found",message:"Sorry, but the page you are looking for was either not found or does not exist.\nTry refreshing the page or click the button below to go back to the Homepage.",hasBackButton:!0},e))}}))))};ue.defaultProps={children:null};var se=ue,le=_()("@app",["INIT","VALIDATE_CONNECTION_SUCCESS","VALIDATE_CONNECTION_ERROR"]),pe=function(e){return{type:le.INIT,payload:e}},de=(n(396),n(118)),me=function(){var e=localStorage.getItem("user");return e||null},fe=function(e){localStorage.setItem("user",e)},Ee=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("timestamp");return!e||!t||(new Date).getTime()>=parseFloat(t)?null:e},he=function(e,t){localStorage.setItem("token",e),localStorage.setItem("timestamp",new Date(1e3*t).getTime())},ve=function(){localStorage.removeItem("token"),localStorage.removeItem("timestamp")},Ce=function(e){return de(e).sub||null},Oe=function(e){var t=de(e);return t.roles?Object.entries(t.roles).map(function(e){return e[1]}):[]},ge={isConnected:null,isAuthenticated:!1,user:null,roles:[],errors:{}},Se=Object(A.c)({isConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.isConnected,t=(arguments.length>1?arguments[1]:void 0).type;return t===le.VALIDATE_CONNECTION_SUCCESS||t===le.VALIDATE_CONNECTION_ERROR||e},isAuthenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.isAuthenticated,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===le.INIT?!!JSON.parse(me()):n===b.AUTH_MOBILECONNECT_SUCCESS?(fe(JSON.stringify(r)),!0):n===le.LOGIN_SUCCESS?(s.a.defaults.headers.common.Authorization="Bearer ".concat(r.token),he(r.token,r.expires),!0):n===le.LOGOUT?(s.a.defaults.headers.common.Authorization=null,ve(),fe(null),!1):e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.user,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===le.INIT?JSON.parse(me()):n===le.LOGIN_SUCCESS?Ce(r.token):n===le.LOGOUT?null:e},roles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.roles,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;if(n===le.INIT){var a=Ee();return a?Oe(a):[]}return n===b.AUTH_MOBILECONNECT_SUCCESS?["ROLE_USER"]:n===le.LOGIN_SUCCESS?Oe(r.token):n===le.LOGOUT?[]:e},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.errors,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===le.LOGIN?{}:n===le.LOGIN_ERROR?r:e}}),Ie=k.a.mark(_e),Re=k.a.mark(be);function _e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.c)({type:le.VALIDATE_CONNECTION_SUCCESS});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(T.c)({type:le.VALIDATE_CONNECTION_ERROR,error:e.t0});case 9:case"end":return e.stop()}},Ie,null,[[0,5]])}function be(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.d)(le.INIT,_e);case 2:case"end":return e.stop()}},Re)}var Ne=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.Init)()}},{key:"render",value:function(){return!1===this.props.isConnected?a.a.createElement("div",{className:"app"},a.a.createElement(ie,{code:503,title:"Could not connect to the API",message:"Please try again later.",color:"white",background:"primary"})):a.a.createElement("div",{className:"app"},a.a.createElement(se,null))}}]),n}(a.a.Component);Ne.defaultProps={isConnected:null};var Ae=Object(i.b)(function(e){var t=e.app;return{isConnected:t.isConnected,isAuthenticated:t.isAuthenticated,roles:t.roles}},function(e){return{Init:function(t){return e(pe(t))}}})(Ne),ye=n(198),we={app:Se,home:w,error:F},je=Object(A.c)(we),ke=k.a.mark(xe),Te=[be(),U(),q()];function xe(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)(Te);case 2:case"end":return e.stop()}},ke)}var Pe=Object(ye.a)(),Le=[Pe],Ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d,De=Object(A.e)(je,Ue(A.a.apply(void 0,Le)));Pe.run(xe);var Be=De;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_ENV_NAME:"production",REACT_APP_API_URL_development:"http://localhost:8080/v1.0",REACT_APP_API_URL_production:"http://localhost:8080/v1.0"})["REACT_APP_API_URL_".concat("production")],s.a.defaults.timeout=2e4,c.a.render(a.a.createElement(i.a,{store:Be},a.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[208,1,2]]]);
//# sourceMappingURL=main.a874206f.chunk.js.map